using System.ComponentModel.DataAnnotations.Schema;

namespace PenTestDataViewer.Api.DataTransferModel.Domain
{
    public class DomainDto
    {
        public static DomainDto FromDatabaseModel(Model.Domain host) => new DomainDto
        {
            Id = host.Id,
            TopDomain = host.TopDomain,
            SubDomain = host.SubDomain,
            Hosts = host.Hosts.Select(h => DomainHostDto.FromDatabaseModel(h)).ToList(),
        };

        public Guid Id { get; set; }

        public string TopDomain { get; set; }

        public string SubDomain { get; set; }

        public List<DomainHostDto> Hosts { get; set; } = new();

        public string Name { get => string.IsNullOrWhiteSpace(SubDomain) ? TopDomain : $"{SubDomain}.{TopDomain}"; }
    }
}
